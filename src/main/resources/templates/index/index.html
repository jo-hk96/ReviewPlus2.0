<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
                  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
                  
 
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/top_rate.css">
    <link rel="stylesheet" href="/css/now_playing.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/scroll-to-top.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%2210 0 100 100%22><text y=%22.90em%22 font-size=%2290%22>ğŸ¬</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
    <link rel="stylesheet" href= "/css/latest_news.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>ë¦¬ë·°í”ŒëŸ¬ìŠ¤</title>
</head>
<style>
#userProfilePicture{
	width: 50px;
	height: 50px;
	border-radius: 25px;
	border:1px solid white;
	object-fit:cover;
}
/*=========================== */
	#MailForwarding {
    position: fixed;
    z-index: 1000; 
    width: 700px;
    height: 500px;
    background-color: rgba(0,0,0,0.7); 
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
   }
   
   .MailModalLogo {
    margin-top: 100px; 
    display: block; 
  }
   
   #MailForm{
   margin: 0 auto;
   width:500px;
   margin-top:50px;
   }
   
  .close-btn{
   color: #aaa; 
   float: right; 
   font-size: 20px; 
   font-weight: bold; 
   line-height: 1; 
   margin-top: -10px;
   margin-right: -10px;
  }
  
  .close-btn:hover,.close-btn:focus{
   color: #000; 
   text-decoration: none;
   outline: none;
   cursor:pointer;
   transform: scale(1.05);
  }
   

</style>

<body>
	<body>
	<!--ìµëª…ì‚¬ìš©ì(ë¹„ë¡œê·¸ì¸ìƒíƒœ)isAnonymous -->
	<!--ì‚¬ìš©ì(ë¡œê·¸ì¸ìƒíƒœ)isAuthenticated -->
    <div id="header" th:fragment="header">                  
	        <a href="/" class="logo">
	           <img th:src="@{/images/logo.png}" alt ="ë¡œê³ " >
	        </a>
       	<div sec:authorize="isAuthenticated()" class = "headerLeft">
       	
				<a href = "/UserMypage"><img
				    id = "userProfilePicture" th:src="@{'/images/profile/' + ${profileFileName}}" 
				    alt="í”„ë¡œí•„ ì‚¬ì§„" ></a>
				    
       			<!-- ROLE_DORMANT -->
			    <span sec:authorize="hasRole('ROLE_DORMANT')">
			        íœ´ë©´ê³„ì •
			    </span>
			    
	       		<!-- ROLE_ADMIN -->
			    <span sec:authorize="hasRole('ROLE_ADMIN')">
			        ê´€ë¦¬ì : <span th:text = "${#authentication.principal.nickname}"></span>
			        <b><a href="/Admin/AdminHome">ì‚¬ì´íŠ¸ê´€ë¦¬</a></b>
			    </span>
			    
			    <!-- ROLE_USER -->
			    <span sec:authorize="hasRole('ROLE_USER')">
			       <b><span th:text = "${#authentication.principal.nickname}" ></span></b>
			    </span>
			    <span><a href="/MoviesList">ì¸ê¸°</a></span>
			    <span><a href="/MoviesList?category=upcoming">ê°œë´‰ì˜ˆì •</a></span>
	    </div>
	    
	    
	    <!-- í—¤ë”ìƒë‹¨ ë©”ë‰´ -->
	    <div sec:authorize="isAnonymous()" class = "headerLeft">
			    <span><a href="/MoviesList">ì¸ê¸°</a></span>
			    <span><a href="/MoviesList?category=upcoming">ê°œë´‰ì˜ˆì •</a></span>
	    </div>
	    
	    
	    
		<!-- í—¤ë” ì˜¤ë¥¸ìª½ ìƒë‹¨ ë©”ë‰´ -->	
	    <div class="headerRight">
				<div class ="userIndex" sec:authorize="isAnonymous()">
					<a href = "/UserLoginMain">ë¡œê·¸ì¸</a>
				</div>
				
				<div class ="userIndex"  sec:authorize="isAuthenticated()">
					<a href = "/logout"  onclick = "return confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ë¡œê·¸ì•„ì›ƒ</a>
				</div>
				
			    <div>
				    <form action="/MoviesList" method="get" class="search-form-container"> 
					        <input type="text" id="movieSearch" name="movieSearch" 
					               placeholder="ì˜í™” ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”. ex)ë°˜ì§€,ë°˜ì§€ì˜,ë°˜ì§€ì˜ ì œì™•,The Lord ,Lord of">
					        
					        <button type="submit" class="search-icon-btn">
					            <i class="fa-solid fa-magnifying-glass" style ="color:gray;"></i>
					        </button>
				    </form>
				</div>
         </div>
	</div>
	
	<div id = "indexMovieList">
	  	 <!-- ê°œë´‰ì¤‘ì¸ ì˜í™”  -->
		 <div class="slider-container2">
	  		 	<h2><a id = "MainMovieListName" href ="/MoviesList?category=now_playing">í˜„ì¬ìƒì˜ì¤‘</a></h2>
			    <button id="prev-btn2" class="nav-btn2">&lt;</button> 
			  	  <div id="movie-list2"></div>
			    <button id="next-btn2" class="nav-btn2">&gt;</button> 
		 </div>
	 	 <div id="loading-indicator2">ì˜í™” ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ëŠ”ì¤‘...</div>
	 	 
	 	 <!-- ì˜í™” ë§¤ê±°ì§„ ìŠ¬ë¼ì´ë” -->
	 	<h2 class="news-title">ìµœì‹  ê¸°ì‚¬</h2>
        <div class="carousel-container">

            <div class="carousel-wrapper">
                <button class="arrow-btn prev-btn"><i class="fas fa-chevron-left"></i></button>

                <div class="news-list-container">
                    <div class="news-list" id="naver-news-list">
                        <p>ë‰´ìŠ¤ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>
                </div>

                <button class="arrow-btn next-btn"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>

	 	 
		  <!--ìµœê³ í‰ì -->
		  <div class="slider-container">
		  		<h2><a id= "MainMovieListName" href ="/MoviesList?category=top_rated">ìµœê³ í‰ì </a></h2>
			    <button id="prev-btn" class="nav-btn">&lt;</button> 
			    	<div id="movie-list"></div>
			    <button id="next-btn" class="nav-btn">&gt;</button> 
		  </div>
		  <div id="loading-indicator">ì˜í™” ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¤ëŠ”ì¤‘...</div>
	</div>
	
	<!--  Url ì•µì»¤ : #review-' + ${review.reviewId} -->
	<div class = "slider-container2">	
			<h2 style="color:#e83939;">ìµœì‹  ë¦¬ë·°</h2>
			<div class="review-container">
					  	<a class="review-card" th:each ="review : ${recentReviews}"
				           th:href="@{/detail/{apiId}(apiId=${review.apiId})} + '#review-' + ${review.reviewId}"
				           style="text-decoration: none; color: black;">
								    <span>[[${review.nickname}]]</span><br>
								  	<b>[[${review.title}]]</b><br>
								    <b id = "comment">"[[${review.comment}]]"</b><br>
								    <span class="rating">
							            <span th:text="${#strings.repeat('â­', #numbers.formatInteger(review.rating, 0))}"></span>
						        	</span>
								    <span id = "regdate">[[${review.regDate}]]</span>
						</a>
			</div>
	</div>
		<p th:if ="${recentReviews.isEmpty()}">ì•„ì§ ì‘ì„±ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
		
	<!-- -----------------------í‘¸í„°--------------------------- -->
    <div id = "footer" th:fragment = "footer" style="color:white;">
    	<a href="/" class="logo">
           <img th:src="@{/images/logo.png}" style ="width:100px;" alt ="ë¡œê³ " >
        </a> 
        <p style = "color:grey;">ë¦¬ë·°í”ŒëŸ¬ìŠ¤ì—ì„œ ì‚¬ìš©ëœ ëª¨ë“  ì˜í™” ì •ë³´ëŠ” 
           <span style ="font-size:15px; font-weight:bold" >
                  <a href ="https://www.themoviedb.org/" style = "text-decoration: none; font-size :17px;">
                        TMDb(The Movie Database)
                  </a>
         	</span>í†µí•´ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤.
        </p>
        <p>ì£¼ì†Œ:ëª»ê³¨ë²ˆì˜ë¡œ 56ë²ˆê¸¸ 8<br>Â© 2025 ReviewPlus.All Rights Reserved.</p>
    <button id = "ShowMailForwardingBtn" onClick="openMailModal()">
		ë¬¸ì˜í•˜ê¸°	
	</button>
    
    </div>
    <!-- --------------------------------------------------------------------- -->
		<div id = "MailForwarding" style="display:none;">
			<a href="/" class="MailModalLogo">
	           <img th:src="@{/images/logo.png}" style ="width:150px;" alt ="ë¡œê³ " >
	        </a> 
			<form action="/inquiry" method="post" id = "MailForm">
				<span class = "close-btn">ë‹«ê¸°</span>
			    <input type="email" name="email" placeholder="ë‹µë³€ ë°›ì„ ì´ë©”ì¼ ì£¼ì†Œ"><br>
			    <input type="text" name="subject" placeholder="ë¬¸ì˜ ì œëª©"><br>
			    <textarea name="content" placeholder = "ë¬¸ì˜í•  ê³„ì • ì´ë©”ì¼,ë‹‰ë„¤ì„,ì„±í•¨, ì‚¬ìœ ë¥¼ ì ì–´ì£¼ì„¸ìš”" rows ="5" cols="57"></textarea><br>
			    <button type="submit"  class="btn-join">ë¬¸ì˜í•˜ê¸°</button>
			</form>
			<div th:if="${sucMail}">
					<p th:text= "${sucMail}" style="color: #e84545; font-weight: bold; font-size:17px;"></p>
			</div>
			<div th:if="${failMail}">
					<p th:text= "${failMail}" style="color: red; font-weight: bold; font-size:17px;"></p>
			</div>
		</div>
<script>
	function openMailModal(){
		const MailModal = document.getElementById('MailForwarding');
		if(MailModal){
			MailModal.style.display = 'block';
		}else{
			console.error("ëª¨ë‹¬ì„ ì°¾ì„ìˆ˜ ì—†ìŒ");
		}
	}
	document.addEventListener('DOMContentLoaded', function(){
		const MailModal = document.getElementById('MailForwarding');
		const closeBtn = document.querySelector('.close-btn');
		if(!MailModal || !closeBtn) return;
		closeBtn.onclick = function(){
			MailModal.style.display = 'none';
		};
		window.onclick = function(event){
			if(event.target === MailModal){
				MailModal.style.display = 'none';
			}
		};
	})
</script>


<button id="scrollToTopBtn" style="display: none;" th:fragment ="scroll-to-top">
    <i class="fas fa-arrow-up fa-lg"></i>
</button>


<!--í”„ë¡œí•„ ì‚¬ì§„  -->
<script src="js/upload.js"></script>
	
 <!-- ì˜í™”ê²€ìƒ‰.js -->	
 <script src="js/movie_search.js"></script>
	
 <!--ì˜í™” ìŠ¬ë¼ì´ë” -->
 <script src="js/now_playing.js" type="module"></script>
 <script src="js/top_rate.js" type="module"></script>
 
 <!-- ë§¨ìœ„ë¡œê°€ê¸° -->
 <script src = "/js/scroll-to-top.js"></script>
 
 <!-- ë‰´ìŠ¤ ìŠ¬ë¼ì´ë“œ íš¨ê³¼ -->
 <script src="/js/latest_news.js" defer></script>
</body>
</html>